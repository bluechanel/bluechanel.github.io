---
title: ğŸ§¬ LangGraphæ•™ç¨‹(ä¸€)ï¼šä»é›¶å¼€å§‹æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªAIèŠå¤©æœºå™¨äºº
description: æœ¬æ–‡æ˜¯ ã€ŠLangGraphå…¥é—¨å…¨è§£ã€‹ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†åŸºäºLangGraphæ„å»ºä¸€ä¸ªèŠå¤©æœºå™¨äººã€‚å¹¶å­¦ä¹ æŸ¥çœ‹Graphçš„å›¾ç»“æ„ã€‚å¦‚æœå‡ºä½ æ˜¯æ–°æ‰‹ï¼Œå»ºè®®å…ˆé˜…è¯»ä¸»æŒ‡å—ä»¥äº†è§£LangGraphçš„å…¨è²Œã€‚LangGraphå…¥é—¨, LangGraphæ•™ç¨‹, LangGraphèŠå¤©æœºå™¨äºº, StateGraphä½¿ç”¨
date: 2025-09-04
updateDate: 2025-09-04
tags: ["LangGraph","LLM","AI"]
cover: cover/264605ee-e889-8089-81f9-d9bc9bb64ee8_80a0584fd6e256fd14aefae7618f47d9.png
---


æœ¬æ–‡æ˜¯ **ã€ŠLangGraphå…¥é—¨å…¨è§£ã€‹**[**LangGraphå…¥é—¨æŒ‡å—ï¼šä»åŸºç¡€ChatBotåˆ°å¤šæ™ºèƒ½ä½“å®æˆ˜**](https://www.wileyzhang.com/posts/264605ee-e889-806e-b847-ce4e7bcba614) ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªèŠå¤©æœºå™¨äººã€‚å¦‚æœå‡ºä½ æ˜¯æ–°æ‰‹ï¼Œå»ºè®®å…ˆé˜…è¯»ä¸»æŒ‡å—ä»¥äº†è§£LangGraphçš„å…¨è²Œã€‚


# åŸºäºLangGraphå¼€å‘ä¸€ä¸ªèŠå¤©bot


## bot Agent ä»£ç 


```python
from typing import Annotated
from typing_extensions import TypedDict
from langchain_openai import ChatOpenAI
from langgraph.graph import StateGraph, START, END
from langgraph.graph.message import add_messages
from pydantic import SecretStr

# æ­¤å¤„å®šä¹‰ä½ è‡ªå·±çš„æ¨¡å‹
llm = ChatOpenAI(base_url="http://127.0.0.1:8000/v1", api_key=SecretStr("123123"), model="qwen3_32")

# å®šä¹‰å›¾çŠ¶æ€
class State(TypedDict):
    messages: Annotated[list, add_messages]  # æ­¤å¤„ç»´æŠ¤å®Œæ•´çš„æ¶ˆæ¯å†å²

graph = StateGraph(State)


def chatbot(state: State):
    return {"messages": [llm.invoke(state["messages"])]}

graph.add_node("chatbot", chatbot)
graph.add_edge(START, "chatbot")
graph.add_edge("chatbot", END)

app = graph.compile()

if __name__ == "__main__":
    messages = []
    while True:
        user_input = input("ğŸ‘¨ğŸ’»: ")
        if user_input.lower() in ["quit", "exit", "q"]:
            print("Exiting...")
            break
        messages.append({"role": "user", "content": user_input})
        response = app.invoke({"messages": messages})
        messages = response["messages"]
        print(f'ğŸ¤–: {response["messages"][-1].content}')
```


## æŸ¥çœ‹botå›¾ç»“æ„


ä½¿ç”¨ä¸‹é¢çš„ä»£ç ï¼Œä¿å­˜å›¾ç»“æ„ï¼Œæ­¤ä»£ç ä¼šåå¤ç”¨åˆ°


```python
from PIL import Image
import io
png_data = app.get_graph(xray=True).draw_mermaid_png()
img_io = io.BytesIO(png_data)

# ä½¿ç”¨PILçš„Imageæ‰“å¼€BytesIOå¯¹è±¡
image = Image.open(img_io)

# æŒ‡å®šä¿å­˜çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„
save_path = 'local_image.png'

# ä¿å­˜å›¾åƒåˆ°æœ¬åœ°
image.save(save_path)
```


![image.png](images/264605ee-e889-8089-81f9-d9bc9bb64ee8/264605ee-e889-8089-81f9-d9bc9bb64ee8_f7156c639e27a15f0c960e7d21620dde.png)


## è¿è¡Œç¤ºä¾‹


![output.gif](images/264605ee-e889-8089-81f9-d9bc9bb64ee8/264605ee-e889-8089-81f9-d9bc9bb64ee8_09024bb7b9c6e3468f278ed482a70f7e.gif)

